<!DOCTYPE html> <html lang="ja"> 
    <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>ばあちゃんボイス</title>
     <style> body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif; text-align: center; } button { padding: 1em 2em; font-size: 1.2em; margin-top: 20px; } </style> </head> 
     <body> <h1>おばあちゃんの声を聞こう！</h1> 
    <audio id="bachanAudio"></audio> 
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const type = urlParams.get('type') || 'friend';
  
    const audioMap = {
      friend: 'bachan_friend.mp3',
      senpai: 'bachan_senpai.mp3',
      kohai: 'bachan_kohai.mp3'
    };
  
    const audio = document.getElementById('bachanAudio');
    audio.src = audioMap[type];
  
    window.addEventListener('load', () => {
      audio.play().catch(err => {
        console.log("自動再生がブロックされました:", err);
        // → ブロックされたらボタンを表示する
        document.getElementById('playBtn').style.display = 'block';
      });
    });
  
    const btn = document.getElementById('playBtn');
    btn.addEventListener('click', () => {
      audio.play();
      btn.style.display = 'none';
    });
  
    audio.addEventListener('ended', () => {
      alert('さ、ハイチーズ！📸');
    });
  </script>
  