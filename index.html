<script>
    const urlParams = new URLSearchParams(window.location.search);
    const type = urlParams.get('type') || 'friend';
  
    const audioMap = {
      friend: 'bachan_friend.mp3',
      senpai: 'bachan_senpai.mp3',
      kohai: 'bachan_kohai.mp3'
    };
  
    const audio = document.getElementById('bachanAudio');
    audio.src = audioMap[type];
  
    window.addEventListener('load', () => {
      audio.play().catch(err => {
        console.log("自動再生がブロックされました:", err);
        // → ブロックされたらボタンを表示する
        document.getElementById('playBtn').style.display = 'block';
      });
    });
  
    const btn = document.getElementById('playBtn');
    btn.addEventListener('click', () => {
      audio.play();
      btn.style.display = 'none';
    });
  
    audio.addEventListener('ended', () => {
      alert('さ、ハイチーズ！📸');
    });
  </script>
  